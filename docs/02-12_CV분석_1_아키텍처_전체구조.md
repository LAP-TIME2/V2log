# V2log μ•„ν‚¤ν…μ² λ¶„μ„ λ³΄κ³ μ„ β€” CV κΈ°λ¥ μ¶”κ°€ κ΄€μ 

> λ¶„μ„μΌ: 2026-02-12 | λ©μ : CV(Computer Vision) κΈ°λ¥ μ¶”κ°€ μ‹ κΈ°μ΅΄ μ•± κµ¬μ΅° νΈν™μ„± ν‰κ°€

---

## 1. ν”„λ΅μ νΈ κ°μ”

| ν•­λ© | κ°’ |
|------|-----|
| μ•± κ·λ¨ | 114κ° Dart νμΌ |
| ν”„λ μ„μ›ν¬ | Flutter 3.24+ |
| μƒνƒκ΄€λ¦¬ | Riverpod 2.5+ (@riverpod μ–΄λ…Έν…μ΄μ…) |
| λ°±μ—”λ“ | Supabase |
| μ•„ν‚¤ν…μ² ν¨ν„΄ | Clean Architecture (Presentation β†’ Domain β†’ Data) |
| λΌμ°ν„° | GoRouter 14.2+ |

---

## 2. μ΄κΈ°ν™” λ° μ§„μ…μ  (main.dart)

ν•µμ‹¬ μ΄κΈ°ν™” μμ„:
1. SystemChrome μ„¤μ • (μƒνƒλ°”, λ„¤λΉ„κ²μ΄μ…λ°” μ¤νƒ€μΌ)
2. ν™”λ©΄ λ°©ν–¥ κ³ μ • (μ„Έλ΅ λ¨λ“λ§ ν—μ©)
3. .env νμΌ λ΅λ“ (μ΅΄μ¬μ‹)
4. Supabase μ΄κΈ°ν™” (URL + AnonKey)
5. Hive λ΅μ»¬ μ €μ¥μ† μ΄κΈ°ν™” (settings, cache, workout λ°•μ¤)
6. NotificationService μ΄κΈ°ν™” (flutter_local_notifications)
7. ProviderScope λν•‘ ν›„ runApp()

**CV μ¶”κ°€ μν–¥λ„**: μ¤‘κ°„ β€” μΉ΄λ©”λΌ κ¶ν• μ”μ²­μ€ mainμ—μ„ μ²λ¦¬ κ°€λ¥, `cv_service` μ΄κΈ°ν™” μ¶”κ°€ ν•„μ”

---

## 3. μ•± κµ¬μ΅° (app.dart)

- MaterialApp.router (GoRouter μ„¤μ •)
- ν…λ§ (λΌμ΄νΈ/λ‹¤ν¬ λ™μ  μ „ν™)
- ν•κµ­μ–΄ λ΅μ»¬λΌμ΄μ μ΄μ… μ§€μ›
- TextScaler.noScaling (μ‹μ¤ν… ν°νΈ ν¬κΈ° λ¬΄μ‹)

**ν‰κ°€**: λ§¤μ° κ°„κ²°ν•κ³  κΉ”λ”ν• κµ¬μ΅° β…

---

## 4. λΌμ°ν„° μ•„ν‚¤ν…μ² (app_router.dart)

| κ²½λ΅ | μ„μΉ | νΉμ§• |
|------|------|------|
| `/` β†’ `/auth/login` β†’ `/home` | μΈμ¦ ν”λ΅μ° | λ¦¬λ‹¤μ΄λ ‰νΈ μ²΄μΈ |
| `/home` (ShellRoute) | ν•λ‹¨νƒ­ | λ„¤λΉ„κ²μ΄μ… λ°” μ μ§€ |
| `/history`, `/stats`, `/profile` | ShellRoute λ‚΄λ¶€ | νƒ­ μ „ν™μ‹ μƒνƒ μ μ§€ |
| `/workout/ai`, `/workout/free` | Shell μ™Έλ¶€ | SlideUp μ• λ‹λ©”μ΄μ… |
| `/workout/summary` | Shell μ™Έλ¶€ | Fade μ• λ‹λ©”μ΄μ… + extra κ²€μ¦ |
| `/exercise/:exerciseId` | νμ΄λ“ μ „ν™ | λ™μ  λΌμ°ν… |

**CV μ¶”κ°€ λΌμ°ν…**: μƒλ΅μ΄ λΌμ°νΈ μ¶”κ°€ λ§¤μ° μ©μ΄ β…

---

## 5. λ””μμΈ μ‹μ¤ν…

### μ»¬λ¬ μ‹μ¤ν… (app_colors.dart)
- Primary (μΈλ””κ³ ): μ£Όμ” μ»¬λ¬
- Secondary (μ¤λ μ§€): μμ  λ¨λ“ κ°•μ΅°
- κ·Όμ΅ λ¶€μ„ μ»¬λ¬, κ°•λ„ μ΅΄ μ»¬λ¬, μ„ΈνΈ νƒ€μ… μ»¬λ¬
- **CV κ²°κ³Ό μ‹κ°ν™”μ— λ°”λ΅ μ‚¬μ© κ°€λ¥** β…

### Spacing μ‹μ¤ν… (app_spacing.dart)
- 4px κΈ°λ° μ¤μΌ€μΌ: xs(4) β†’ sm(8) β†’ md(12) β†’ lg(16) β†’ xl(20) β†’ xxl(24) β†’ xxxl(32)
- λ²„νΌ, μ…λ ¥, μ•„μ΄μ½, λ³΄λ” λ°κ²½ λ¨λ‘ μ •μλ¨
- **CV UI μ»΄ν¬λ„νΈ κµ¬μ„±μ‹ μ§μ ‘ μ‚¬μ© κ°€λ¥** β…

---

## 6. Provider μ•„ν‚¤ν…μ²

### ν•µμ‹¬ Provider κµ¬μ΅°
```
auth_provider.dart          # μΈμ¦ μƒνƒ (keepAlive)
workout_provider.dart       # μ§„ν–‰μ¤‘μΈ μ΄λ™ μ„Έμ… (keepAlive)
user_provider.dart          # μ‚¬μ©μ ν†µκ³„ (Future κΈ°λ°)
preset_routine_provider.dart # ν”„λ¦¬μ…‹ λ£¨ν‹΄ (Future κΈ°λ°)
exercise_provider.dart       # μ΄λ™ λΌμ΄λΈλ¬λ¦¬
notification_provider.dart   # μ•λ¦Ό μ„¤μ •
timer_provider.dart          # ν΄μ‹ νƒ€μ΄λ¨Έ
sync_provider.dart           # μ¤ν”„λΌμΈ λ™κΈ°ν™”
```

**νΉμ§•**:
- @riverpod μ–΄λ…Έν…μ΄μ… κΈ°λ° (μµμ‹  ν¨ν„΄)
- keepAliveλ΅ μƒνƒ μ μ§€ (μ„±λ¥ μµμ ν™”)
- AsyncValue ν™μ© (λ΅λ”©/μ—λ¬/μ„±κ³µ μ²λ¦¬)
- ref.watch / ref.read λ…ν™•ν• μ‚¬μ©

**CV μ¶”κ°€ κ°€λ¥μ„±**: λ§¤μ° μΆ‹μ β… β€” μƒ Provider μ¶”κ°€λ§μΌλ΅ CV μƒνƒ κ΄€λ¦¬ κ°€λ¥

---

## 7. μμ΅΄μ„± ν¨ν‚¤μ§€ λ¶„μ„

### ν„μ¬ ν¨ν‚¤μ§€ (CV νΈν™μ„±)

| μΉ΄ν…κ³ λ¦¬ | ν¨ν‚¤μ§€ | λ²„μ „ | CV νΈν™μ„± |
|----------|--------|------|----------|
| μƒνƒκ΄€λ¦¬ | flutter_riverpod | ^2.5.1 | β… |
| λΌμ°ν… | go_router | ^14.2.0 | β… |
| λ°±μ—”λ“ | supabase_flutter | ^2.5.6 | β… |
| λ΅μ»¬μ €μ¥ | hive_flutter | ^1.1.0 | β… |
| UI | flutter_svg | ^2.0.10+1 | β… |
| μ• λ‹λ©”μ΄μ… | rive / lottie | 0.13.4 / 3.1.0 | β… |
| λ°μ΄ν„° | freezed / json_serializable | 2.4.1 / 6.8.0 | β… |

### CV μ¶”κ°€ ν•„μ” ν¨ν‚¤μ§€

| ν¨ν‚¤μ§€ | λ©μ  | μƒνƒ |
|--------|------|------|
| camera | μΉ΄λ©”λΌ ν”Όλ“ μ¤νΈλ¦Ό | π”΄ λ―Έν¬ν•¨ |
| google_mlkit_pose_detection | MediaPipe Pose | π”΄ λ―Έν¬ν•¨ |
| tflite_flutter | μ»¤μ¤ν…€ YOLO λ¨λΈ | π”΄ λ―Έν¬ν•¨ |
| image | μ΄λ―Έμ§€ ν”„λ΅μ„Έμ‹± | π”΄ λ―Έν¬ν•¨ |
| permission_handler | κ¶ν• μ”μ²­ | π”΄ λ―Έν¬ν•¨ |

---

## 8. λ°μ΄ν„° μ„λΉ„μ¤ λ¶„μ„

### SupabaseService
- Auth (μ΄λ©”μΌ, Google, Apple, Kakao)
- Realtime Database CRUD
- Storage (νμΌ μ—…λ΅λ“/λ‹¤μ΄λ΅λ“)
- **CV λ°μ΄ν„° μ €μ¥**: β… κ°€λ¥

### LocalStorageService
- Hiveλ΅ μ΄λ™ μ„Έμ… μΊμ‹
- SharedPreferencesλ΅ μ„¤μ • μ €μ¥
- **CV μ¶”κ°€ ν™μ©**: β… κ°€λ¥ (λ¨λΈ μΊμ‹)

---

## 9. μ½”λ“ ν’μ§ & μ•„ν‚¤ν…μ² ν‰κ°€

### κ°•μ 

| ν•­λ© | ν‰κ°€ |
|------|------|
| Riverpod μ‚¬μ© | A+ (@riverpod + keepAlive μµμ ν™”) |
| GoRouter κµ¬μ΅° | A+ (ShellRoute, λ¦¬λ‹¤μ΄λ ‰νΈ μ²΄μΈ λ…ν™•) |
| λ””μμΈ μ‹μ¤ν… | A (μ»¬λ¬/μ¤νμ΄μ‹± μΌκ΄€μ„±) |
| λ¨λΈ μ„¤κ³„ | A (Freezed + json_serializable ν¨ν„΄) |
| μ—λ¬ μ²λ¦¬ | A (AsyncValue + try-catch) |
| ν…λ§ μ‹μ¤ν… | A+ (Material3 + μ»¤μ¤ν„°λ§μ΄μ§•) |
| λ μ΄μ–΄ λ¶„λ¦¬ | A (Data β†’ Domain β†’ Presentation λ…ν™•) |

### κ°μ„  ν•„μ” μμ—­

| ν•­λ© | ν„ν™© | CV μ¶”κ°€μ‹ μ£Όμ |
|------|------|---|
| μΉ΄λ©”λΌ κ¶ν• | λ―Έν¬ν•¨ | android/ios μ„¤μ • ν•„μ |
| ML ν¨ν‚¤μ§€ | 0κ° | camera + google_ml_kit μ¶”κ°€ ν•„μ |
| μ‹¤μ‹κ°„ μ²λ¦¬ | μ΄λ™ κΈ°λ΅λ§ | CVλ” 30fps ν”„λ μ„ μ²λ¦¬ ν•„μ” |

---

## 10. μµμΆ… ν‰κ°€

**πΆ CV κΈ°λ¥ μ¶”κ°€μ— μ΄μƒμ μΈ μ•„ν‚¤ν…μ²**

- Clean Architectureλ΅ λ μ΄μ–΄ λ¶„λ¦¬ μ™„λ²½
- Riverpod μµμ‹  ν¨ν„΄μΌλ΅ μƒνƒ κ΄€λ¦¬ ν™•μ¥ μ©μ΄
- GoRouterλ΅ μƒ ν™”λ©΄ μ¶”κ°€ κ°„λ‹¨
- λ””μμΈ μ‹μ¤ν…μΌλ΅ CV UI μΌκ΄€μ„± μ μ§€ μ‰¬μ›€
- Supabase + Hiveλ΅ CV λ°μ΄ν„° μ €μ¥ μ¤€λΉ„ μ™„λ£

**μ•±μ„ μƒλ΅ λ§λ“¤ ν•„μ” μ—†μ. κΈ°μ΅΄ κµ¬μ΅° μ„μ— νμΌ μ¶”κ°€λ§μΌλ΅ CV ν†µν•© κ°€λ¥.**
