# 무게 원판 자동 감지 — 딥리서치 프롬프트 v2

> v1은 방법론을 지정해버려서 리서치 범위를 좁힘.
> v2는 열린 질문으로 근본적 판단부터 요청.

---

## 프롬프트 (전체 복사용)

```
당신은 Computer Vision과 물리 광학 분야의 수석 연구원입니다.
아래 문제가 "풀 수 있는 문제인지" 먼저 판단하고, 그에 따라 조사해 주세요.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
문제 정의
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

헬스장 바벨에 같은 종류의 원판(weight plate)이 여러 장 겹쳐서 끼워져 있습니다.
일반 스마트폰 카메라(전면, RGB, 720p~1080p)로 이 바벨을 촬영했을 때,
**같은 종류 원판이 몇 장 겹쳐 있는지** 자동으로 추정하고 싶습니다.

예시:
- 20kg 원판 × 1장 = 정답 1
- 20kg 원판 × 3장 겹침 = 정답 3
- 5kg 원판 × 2장 겹침 = 정답 2

"어떤 종류의 원판인가" (20kg vs 10kg 구분)는 YOLO 모델로 96% 정확도로 이미 해결했습니다.
문제는 오직 **"몇 장 겹쳐 있는가"** 입니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
환경 제약 (바꿀 수 없음)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

물리적 조건:
- 카메라: 일반 스마트폰 전면 카메라 (ToF/LiDAR 없음, RGB만)
- 촬영 거리: 0.3~1.5m (사용자가 바벨을 카메라 앞으로 가져옴)
- 촬영 각도: 통제 불가 (사용자가 자연스럽게 드는 각도, 대략 정면~45°)
- 조명: 헬스장 형광등/LED, 메탈 반사 강함, 통제 불가
- 원판 색상: 80~90%가 검정 러버 코팅 (IWF 컬러코딩은 극소수)
- 배경: 다른 사람, 랙, 거울 등 복잡한 환경

원판 물리 치수 (IWF 표준):
| 원판 | 지름 | 두께 | 두께/지름 비율 |
|------|------|------|-------------|
| 20kg | 450mm | 33-52mm | 7.3~11.6% |
| 15kg | 375mm | 34-45mm | 9.1~12.0% |
| 10kg | 290mm | 34-39mm | 11.7~13.4% |
| 5kg | 248mm | 22-27mm | 8.9~10.9% |
| 2.5kg | 213mm | 16-19mm | 7.5~8.9% |

→ 두께가 지름의 7~13%. 3장 겹쳐도 전체 두께가 지름의 35% 이하.

UX 제약 (절대 조건):
- 사용자에게 추가 조작 요구 금지 (각도 맞추기, 재촬영, 멀티뷰 등 불가)
- 단일 시점에서 자동으로 판단해야 함
- 스마트폰에서 실시간(< 500ms) 실행 가능해야 함

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
이미 시도하고 실패한 것들
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

4가지 완전히 다른 원리의 접근법을 시도했고, 전부 목표(80% 정확도) 미달:

1. **Bbox Aspect Ratio** (최고 성적):
   - YOLO가 잡은 bbox의 종횡비로 두께 추정 → 장수 역산
   - 결과: 20kg에서 75% (3/4), 5kg에서 실패 (1→2장 오판)
   - SNR 분석: 신호 0.217, 잡음 ±0.11 → SNR ≈ 2.0

2. **단안 Depth Estimation (MiDaS v2.1)**:
   - 단안 깊이 추정으로 원판 스택 두께 측정
   - 결과: 완전 실패 (depth 출력이 원판 두께와 무관)

3. **Sobel Edge Histogram Peak Counting**:
   - 에지 검출 → 수직 프로젝션 히스토그램 피크 = 장수
   - 결과: 완전 실패 (메탈 반사+조명으로 1장→3~4장 오판)

4. **VLM (Gemini 3 Flash Preview)**:
   - 사진 + 프롬프트 → LLM이 직접 판단
   - 결과: 최고 71% 정확도, 장수 추정에서 일관적 실패

업계 사례:
- **Tempo** (미국 홈짐 스타트업): 전용 ToF 깊이 카메라 + 전용 컬러코딩 원판을 사용했는데도, 공식 FAQ에 "같은 색 원판 2장 겹치면 감지 불가"라고 명시

학술:
- Dumery et al. (2024): 겹친 동일 객체 정확한 카운팅에는 30-60장 멀티뷰 이미지 필요
- 반도체 웨이퍼 카운팅(99.99% 정확): 통제된 조명 + 측면 촬영 + 균일 두께 전제

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
질문 (핵심)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### Q1: 이 문제는 풀 수 있는 문제입니까?

위 제약 조건(일반 RGB 카메라, 단일 시점, 비통제 환경, 실시간) 하에서,
겹친 동일 원판의 장수를 80% 이상 정확도로 추정하는 것이 물리적/이론적으로 가능한지 판단해 주세요.

"가능하다"면:
- 어떤 원리로 가능한가? (우리가 놓친 정보 소스가 있는가?)
- 학술 논문이나 산업 사례에서 유사 문제를 해결한 실제 검증된 사례가 있는가?
- 예상 정확도, 필요 데이터, 개발 기간은?

"불가능하다" 또는 "현실적으로 매우 어렵다"면:
- 물리적/정보 이론적 근거를 제시해 주세요
- "이 조건 하나만 바꾸면 가능하다"는 것이 있는가? (예: ToF 카메라 추가, 2장 촬영 허용 등)
- 포기할 경우 차선책은 무엇인가?

### Q2: 우리가 놓치고 있는 접근법이 있습니까?

위 4가지 외에, 2023~2026년 최신 연구에서 유사 문제(겹친 동일 객체 카운팅)를 해결한 사례가 있다면 알려주세요.

조사 범위 제안 (이것에 국한하지 말고 자유롭게):
- 제조업 (웨이퍼/코인/접시/종이 스택 계수)
- 물류 (팔레트 박스 계수)
- 농업 (과일 더미 카운팅)
- 의료 (세포/조직 층 카운팅)
- 기타 도메인에서 단일 2D 이미지로 겹친 동일 객체 수를 센 사례

단, 각 사례가 우리 환경 제약(비통제 조명, 비통제 각도, 일반 RGB 카메라, 실시간)에서도 작동하는지 반드시 평가해 주세요.

### Q3: 현실적 최선의 선택지는 무엇입니까?

아래 옵션들을 포함하되 이에 국한하지 말고, 비용/시간/정확도/UX 기준으로 순위를 매겨 주세요:

A) 기존 YOLO(원판 종류 96%)를 힌트로 활용 + 장수만 사용자가 1탭으로 입력
   → "20kg 감지됨. 몇 장?" [1] [2] [3] [4] 버튼

B) 기존 Mode A(Aspect Ratio)를 개선하여 85%까지 끌어올리기
   → 가능한지, 얼마나 걸리는지

C) 완전히 다른 접근법 (당신이 Q2에서 발견한 것)

D) 무게 감지 자체를 포기하고, 횟수 카운팅(이미 88~95%)에만 집중

E) 기타 당신이 제안하는 방법

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
출력 형식
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. **Q1 판정**: 풀 수 있다 / 풀 수 없다 / 조건부 가능 (근거 포함)
2. **Q2 조사 결과**: 발견한 사례마다 — 논문/사례, 정확도, 우리 환경 적용 가능 여부
3. **Q3 추천 순위**: Top 3, 각각에 대해:
   - 왜 이것이 최선인가
   - 예상 정확도
   - 개발 비용/기간
   - 이것이 실패하는 시나리오
```
