# 결정 반영 검증 시스템 — 사용 가이드

> YOLO11 사고 재발 방지를 위해 만든 시스템.
> "결정했는데 코드에 안 반영되는 실수"를 자동으로 잡아줍니다.

---

## 한 줄 요약

**내가 할 일은 거의 없음.** Claude가 자동으로 체크하고, 문제 있으면 알려줌.

---

## 1. 자동으로 작동하는 것 (내가 안 해도 됨)

| 언제 | 뭘 하는지 | 예시 |
|------|----------|------|
| **세션 시작할 때** | MEMORY.md에 📌 미반영 항목 있으면 자동 검증 | "📌 미반영 2건 발견, 검증합니다" |
| **새 파일 만들 때** | 기존 결정과 충돌하는지 자동 확인 | .py/.md/.dart 파일 생성 직후 |
| **커밋 직전** | 변경 파일이 결정 관련 파일이면 교차 확인 | YOLO 관련 파일 수정 시 |
| **`/cv-status` 실행할 때** | 마지막 섹션에 결정 일관성 체크 포함 | cv-status 대시보드 하단 |

---

## 2. 내가 직접 실행하는 명령어 (2개)

### `/decision-check` — 전체 결정 검증

```
채팅창에 입력: /decision-check
```

**언제 쓰면 좋은지:**
- 작업 시작 전에 "지금 상태 깨끗한가?" 확인하고 싶을 때
- 큰 작업 끝나고 커밋하기 전에
- 뭔가 찜찜할 때

**결과 예시:**
```
## 결정 반영 검증 결과 (2026-02-15)
### ✅ 통과: 11/11개  |  ❌ 실패: 0개

| # | 체크 항목 | 상태 | 상세 |
|---|----------|------|------|
| 1 | 지원 운동 수 | ✅ | 코드 10개 = 문서 10개 |
| 2 | YOLO11 잔존 | ✅ | 0건 |
...
```

❌가 나오면 → Claude가 어디를 어떻게 고쳐야 하는지 알려줌 → "고쳐줘" 하면 됨.

---

### `/cv-status` — CV 전체 대시보드 (검증 포함)

```
채팅창에 입력: /cv-status
```

기존 CV 진행 상황 대시보드 + 마지막에 결정 일관성 체크가 자동 포함됨.

---

## 3. 결정을 새로 내렸을 때

예를 들어 "클래스를 9개에서 3개로 줄이자" 같은 결정을 하면:

1. **Claude가 자동으로** MEMORY.md에 📌로 기록함
2. **Claude가 코드 수정하면** 📌 → ✅로 바뀜
3. **✅ 바꾸기 전에** Claude가 Grep으로 실제 검증함 (이제 눈대중으로 ✅ 안 찍음)

내가 할 일: **"이렇게 하자"라고 말하기만 하면 됨.** 나머지는 자동.

---

## 4. 검증이 잡아주는 것들 (11개 항목)

### Phase 1 (횟수 카운팅)
- 운동 개수가 코드와 문서에서 같은지
- Rep Counter 버전이 코드와 문서에서 같은지
- MLKit/camera 패키지 버전이 pubspec.yaml과 문서에서 같은지

### Phase 2A (모델 학습)
- YOLO11 잔여물이 남아있지 않은지 (이번 사고의 원인)
- YOLO26-N이 train.py에 제대로 있는지
- 클래스 수가 data.yaml과 문서에서 같은지
- Phase 진행 상황이 실제와 문서에서 같은지

### 문서 간 크로스체크
- CLAUDE.md ↔ CLAUDE-CV.md 상태 일치
- CLAUDE-CV.md ↔ V2log-CV-Training/CLAUDE.md 일치
- MEMORY.md 📌 항목과 실제 코드 정합성

---

## 5. 이 시스템이 생긴 이유

```
2026-02-15 사고 경위:

1. "YOLO26-N으로 하자" 결정 → MEMORY.md에 ✅ 기록
2. 새 Colab 노트북 만들 때 → YOLO11로 작성됨 (실수)
3. 30분 넘게 YOLO11로 학습 돌림 → 뒤늦게 발견

근본 원인: "결정 → 기록 → 구현 → 검증"에서 검증이 빠져있었음
```

**이제는:** 새 파일 만들 때 + 커밋 전 + 세션 시작 시 → 자동 검증 3중 방어.
