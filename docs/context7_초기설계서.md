## ğŸ“„ context7.md íŒŒì¼

```markdown
# context7.md - V2log ìƒì„¸ ì»¨í…ìŠ¤íŠ¸ ë¬¸ì„œ

## ğŸ“Œ ì´ ë¬¸ì„œì˜ ëª©ì 

ì´ ë¬¸ì„œëŠ” V2log ì•± ê°œë°œ ì‹œ Claude Codeê°€ ì°¸ì¡°í•´ì•¼ í•˜ëŠ” ìƒì„¸í•œ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.
ì½”ë“œ ìƒì„±, ë””ë²„ê¹…, ì•„í‚¤í…ì²˜ ê²°ì • ì‹œ ì´ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## 1. ë²¤ì¹˜ë§ˆí‚¹ ì•± ë¶„ì„

### í”Œëœí• (Planfit) - ê°€ì ¸ì˜¬ ì¥ì 

| ê¸°ëŠ¥ | ì„¤ëª… | êµ¬í˜„ ìš°ì„ ìˆœìœ„ |
|------|------|-------------|
| AI ë§ì¶¤ ë£¨í‹´ | ì‹ ì²´ì •ë³´/ëª©í‘œ ê¸°ë°˜ ìë™ ìƒì„± | â­â­â­ MVP |
| í—¬ìŠ¤ì¥ ê¸°êµ¬ ì—°ë™ | ë“±ë¡ëœ í—¬ìŠ¤ì¥ ê¸°êµ¬ ê¸°ë°˜ ì¶”ì²œ | â­â­ Phase 2 |
| 3D ì• ë‹ˆë©”ì´ì…˜ ê°€ì´ë“œ | Rive/Lottie ìš´ë™ ë™ì‘ ê°€ì´ë“œ | â­â­â­ MVP |
| ìŒì„± ì½”ì¹­ | TTS ì„¸íŠ¸/íœ´ì‹ ì•ˆë‚´ | â­â­ Phase 2 |
| AI íŠ¸ë ˆì´ë„ˆ ì±—ë´‡ | GPT-4 ê¸°ë°˜ ìƒë‹´ | â­ Phase 3 |
| ì»¤ë®¤ë‹ˆí‹° | í´ëŸ½/ì±Œë¦°ì§€/í”¼ë“œ | â­ Phase 3 |
| Apple Watch | ì›Œì¹˜ ì—°ë™ | â­ Phase 3 |

### ë²ˆí• (BurnFit) - ê°€ì ¸ì˜¬ ì¥ì 

| ê¸°ëŠ¥ | ì„¤ëª… | êµ¬í˜„ ìš°ì„ ìˆœìœ„ |
|------|------|-------------|
| 10ì´ˆ ë¹ ë¥¸ ê¸°ë¡ | ìµœì í™”ëœ ì…ë ¥ UX | â­â­â­ MVP |
| ì»¤ìŠ¤í…€ ë£¨í‹´ | ì™„ì „ ììœ  ë£¨í‹´ êµ¬ì„± | â­â­â­ MVP |
| ì„¸íŠ¸ íƒ€ì… êµ¬ë¶„ | ì›œì—…/ë³¸ì„¸íŠ¸/ë“œë¡­ì„¸íŠ¸/ì‹¤íŒ¨ | â­â­â­ MVP |
| 1RM ë¶„ì„ | ìë™ 1RM ê³„ì‚° ë° ê°•ë„ ë¶„ì„ | â­â­â­ MVP |
| íšŒì°¨ë³„ ê¸°ë¡ | í•˜ë£¨ 3íšŒ ìš´ë™ ê¸°ë¡ | â­â­ Phase 2 |
| ë©”ëª¨ ê²€ìƒ‰ | ì„¸íŠ¸ë³„ ë©”ëª¨ ë° ê²€ìƒ‰ | â­â­ Phase 2 |
| ì‹ë‹¨ ê¸°ë¡ | ê°„í¸ ì‹ë‹¨ ê¸°ë¡ | â­â­ Phase 2 |

### ë‹¨ì  ìƒì‡„

| í”Œëœí• ë‹¨ì  | í•´ê²°ì±… |
|------------|--------|
| ë£¨í‹´ ì‹œì‘ í›„ ì·¨ì†Œ ë¶ˆê°€ | ì–¸ì œë“  ì·¨ì†Œ/ìˆ˜ì • ê°€ëŠ¥ ë²„íŠ¼ ì¶”ê°€ |
| ë‹¨ì¼ ìš´ë™ ê¸°ë¡ ë¶ˆê°€ | "ë¹ ë¥¸ ê¸°ë¡" ë²„íŠ¼ìœ¼ë¡œ ë£¨í‹´ ì—†ì´ ì¦‰ì‹œ ê¸°ë¡ |
| ììœ ë¡œìš´ ê¸°ë¡ ì œí•œ | AI ì¶”ì²œ + ì™„ì „ ì»¤ìŠ¤í…€ ëª¨ë“œ ë³‘í–‰ |
| ì‹ë‹¨ ê¸°ë¡ ì—†ìŒ | Phase 2ì—ì„œ ì‹ë‹¨ ê¸°ë¡ ì¶”ê°€ |

| ë²ˆí• ë‹¨ì  | í•´ê²°ì±… |
|----------|--------|
| AI ë£¨í‹´ ì¶”ì²œ ì—†ìŒ | GPT-4 ê¸°ë°˜ AI ì¶”ì²œ ì‹œìŠ¤í…œ |
| ë™ì‘ ê°€ì´ë“œ ì—†ìŒ | 3D Rive ì• ë‹ˆë©”ì´ì…˜ ê°€ì´ë“œ |
| ìŠ¤ë§ˆíŠ¸ì›Œì¹˜ ë¯¸ì§€ì› | Apple Watch + Galaxy Watch ì§€ì› |
| ì»¤ë®¤ë‹ˆí‹° ì•½í•¨ | í´ëŸ½/ì±Œë¦°ì§€/í”¼ë“œ ê¸°ëŠ¥ |

---

## 2. í•µì‹¬ UX í”Œë¡œìš°

### 2.1 ë“€ì–¼ ëª¨ë“œ ì‹œìŠ¤í…œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ì•± í™ˆ í™”ë©´ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–¼ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ğŸ¤– AI ëª¨ë“œ â”‚ â”‚ âœï¸ ììœ  ëª¨ë“œ â”‚ â”‚ (í”Œëœí•å¼) â”‚ â”‚ (ë²ˆí•å¼) â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â–¼ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ í†µí•© ìš´ë™ ì§„í–‰ í™”ë©´ (ê³µí†µ UI) â”‚ â”‚ â€¢ 10ì´ˆ ë¹ ë¥¸ ê¸°ë¡ (ë²ˆí•) â”‚ â”‚ â€¢ ì„¸íŠ¸ íƒ€ì… êµ¬ë¶„ (ë²ˆí•) â”‚ â”‚ â€¢ 1RM ìë™ ê³„ì‚° (ë²ˆí•) â”‚ â”‚ â€¢ 3D ê°€ì´ë“œ (í”Œëœí•) â”‚ â”‚ â€¢ ë£¨í‹´ ì¤‘ê°„ ì·¨ì†Œ ê°€ëŠ¥ (ë‹¨ì  ìƒì‡„) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


### 2.2 ë¹ ë¥¸ ê¸°ë¡ UX (10ì´ˆ ëª©í‘œ)

**ëª©í‘œ**: ì„¸íŠ¸ ì™„ë£Œ í›„ 10ì´ˆ ì´ë‚´ ê¸°ë¡ ì™„ë£Œ

**UX ì›ì¹™**:
1. **ì´ì „ ê¸°ë¡ ìë™ ë¡œë“œ**: ë§ˆì§€ë§‰ ìˆ˜í–‰ ë¬´ê²Œ/íšŸìˆ˜ê°€ ê¸°ë³¸ê°’
2. **ì›íƒ­ ì™„ë£Œ**: í° "ì„¸íŠ¸ ì™„ë£Œ" ë²„íŠ¼ í•œ ë²ˆìœ¼ë¡œ ê¸°ë¡
3. **ë¹ ë¥¸ ì¡°ì ˆ**: Â±2.5kg, Â±1íšŒ ë²„íŠ¼ìœ¼ë¡œ ì¦‰ì‹œ ì¡°ì ˆ
4. **í–…í‹± í”¼ë“œë°±**: ëª¨ë“  ìƒí˜¸ì‘ìš©ì— ì§„ë™ í”¼ë“œë°±
5. **íƒ€ì´ë¨¸ ìë™ ì‹œì‘**: ì„¸íŠ¸ ì™„ë£Œ ì‹œ íœ´ì‹ íƒ€ì´ë¨¸ ìë™ ì‹œì‘

```dart
// ë¹ ë¥¸ ê¸°ë¡ í”Œë¡œìš°
1. ì„¸íŠ¸ ì™„ë£Œ ë²„íŠ¼ íƒ­
   â†“
2. í˜„ì¬ ë¬´ê²Œ/íšŸìˆ˜ë¡œ ìë™ ì €ì¥ (ê¸°ë³¸ê°’ì€ ì´ì „ ê¸°ë¡)
   â†“
3. í–…í‹± í”¼ë“œë°± (Heavy Impact)
   â†“
4. íœ´ì‹ íƒ€ì´ë¨¸ ìë™ ì‹œì‘
   â†“
5. ë‹¤ìŒ ì„¸íŠ¸ ì¤€ë¹„ (ë¬´ê²Œ/íšŸìˆ˜ ìœ ì§€)
2.3 ì„¸íŠ¸ íƒ€ì… ì‹œìŠ¤í…œ
Copyenum SetType {
  warmup,    // ì›œì—… ì„¸íŠ¸ - íšŒìƒ‰
  working,   // ë³¸ì„¸íŠ¸ - ì¸ë””ê³  (Primary)
  drop,      // ë“œë¡­ì„¸íŠ¸ - ì•°ë²„
  failure,   // ì‹¤íŒ¨ ì„¸íŠ¸ - ë ˆë“œ
  superset,  // ìŠˆí¼ì„¸íŠ¸ - í¼í”Œ
}
ì„¸íŠ¸ íƒ€ì… ë³€ê²½ UX:

ê¸°ë³¸ê°’: working (ë³¸ì„¸íŠ¸)
ë¡±í”„ë ˆìŠ¤ë¡œ íƒ€ì… ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
ë˜ëŠ” ì¢Œìš° ìŠ¤ì™€ì´í”„ë¡œ ìˆœí™˜
3. ë°ì´í„° ëª¨ë¸ ìƒì„¸
3.1 User Model
Copy@freezed
class UserModel with _$UserModel {
  const factory UserModel({
    required String id,
    required String email,
    required String nickname,
    String? profileImageUrl,
    Gender? gender,
    DateTime? birthDate,
    double? height,
    double? weight,
    @Default(ExperienceLevel.beginner) ExperienceLevel experienceLevel,
    @Default(FitnessGoal.hypertrophy) FitnessGoal fitnessGoal,
    @Default(PreferredMode.hybrid) PreferredMode preferredMode,
    String? gymId,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _UserModel;

  factory UserModel.fromJson(Map<String, dynamic> json) => 
    _$UserModelFromJson(json);
}

enum Gender { male, female, other }

enum ExperienceLevel {
  beginner,      // 0-6ê°œì›”
  intermediate,  // 6ê°œì›”-2ë…„
  advanced,      // 2ë…„ ì´ìƒ
}

enum FitnessGoal {
  strength,     // ê·¼ë ¥
  hypertrophy,  // ê·¼ë¹„ëŒ€
  endurance,    // ê·¼ì§€êµ¬ë ¥
  weightLoss,   // ì²´ì¤‘ ê°ëŸ‰
}

enum PreferredMode {
  ai,      // AI ì¶”ì²œ ì„ í˜¸
  free,    // ììœ  ê¸°ë¡ ì„ í˜¸
  hybrid,  // í˜¼í•©
}
Copy
3.2 Exercise Model
Copy@freezed
class ExerciseModel with _$ExerciseModel {
  const factory ExerciseModel({
    required String id,
    required String name,
    String? nameEn,
    required ExerciseCategory category,
    required MuscleGroup primaryMuscle,
    @Default([]) List<MuscleGroup> secondaryMuscles,
    @Default([]) List<String> equipmentRequired,
    required ExperienceLevel difficulty,
    @Default([]) List<String> instructions,
    @Default([]) List<String> tips,
    String? animationUrl,
    String? videoUrl,
    String? thumbnailUrl,
    double? caloriesPerMinute,
  }) = _ExerciseModel;

  factory ExerciseModel.fromJson(Map<String, dynamic> json) => 
    _$ExerciseModelFromJson(json);
}

enum ExerciseCategory { strength, cardio, flexibility }

enum MuscleGroup {
  chest,
  back,
  shoulders,
  biceps,
  triceps,
  forearms,
  abs,
  obliques,
  quads,
  hamstrings,
  glutes,
  calves,
  traps,
  lats,
  lowerBack,
  fullBody,
}
Copy
3.3 WorkoutSession Model
Copy@freezed
class WorkoutSessionModel with _$WorkoutSessionModel {
  const factory WorkoutSessionModel({
    required String id,
    required String userId,
    String? routineId,
    @Default(1) int sessionNumber,  // ë‹¹ì¼ íšŒì°¨ (í•˜ë£¨ 3íšŒê¹Œì§€)
    required WorkoutMode mode,
    required DateTime startedAt,
    DateTime? finishedAt,
    @Default(false) bool isCancelled,
    double? totalVolume,
    int? totalSets,
    int? totalDurationSeconds,
    int? caloriesBurned,
    String? notes,
    int? moodRating,  // 1-5
    @Default([]) List<WorkoutSetModel> sets,
  }) = _WorkoutSessionModel;

  factory WorkoutSessionModel.fromJson(Map<String, dynamic> json) => 
    _$WorkoutSessionModelFromJson(json);
}

enum WorkoutMode { ai, free }
3.4 WorkoutSet Model
Copy@freezed
class WorkoutSetModel with _$WorkoutSetModel {
  const factory WorkoutSetModel({
    required String id,
    required String sessionId,
    required String exerciseId,
    required int setNumber,
    @Default(SetType.working) SetType setType,
    double? weight,
    int? reps,
    double? targetWeight,
    int? targetReps,
    double? rpe,  // 1-10
    int? restSeconds,
    @Default(false) bool isPr,
    String? notes,
    required DateTime completedAt,
  }) = _WorkoutSetModel;

  factory WorkoutSetModel.fromJson(Map<String, dynamic> json) => 
    _$WorkoutSetModelFromJson(json);
}

enum SetType {
  warmup,
  working,
  drop,
  failure,
  superset,
}
Copy
4. Provider êµ¬ì¡°
4.1 Auth Provider
Copy// lib/domain/providers/auth_provider.dart

@riverpod
class Auth extends _$Auth {
  @override
  FutureOr<UserModel?> build() async {
    final supabase = ref.watch(supabaseServiceProvider);
    final session = supabase.client.auth.currentSession;
    
    if (session == null) return null;
    
    return await ref.watch(userRepositoryProvider)
        .getUserById(session.user.id);
  }

  Future<void> signInWithEmail(String email, String password) async {
    state = const AsyncLoading();
    state = await AsyncValue.guard(() async {
      final supabase = ref.read(supabaseServiceProvider);
      final response = await supabase.client.auth.signInWithPassword(
        email: email,
        password: password,
      );
      return await ref.read(userRepositoryProvider)
          .getUserById(response.user!.id);
    });
  }

  Future<void> signOut() async {
    await ref.read(supabaseServiceProvider).client.auth.signOut();
    state = const AsyncData(null);
  }
}
Copy
4.2 Workout Provider
Copy// lib/domain/providers/workout_provider.dart

@riverpod
class ActiveWorkout extends _$ActiveWorkout {
  @override
  WorkoutSessionModel? build() => null;

  Future<void> startWorkout({
    String? routineId,
    required WorkoutMode mode,
  }) async {
    final user = ref.read(authProvider).valueOrNull;
    if (user == null) throw Exception('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');

    final session = WorkoutSessionModel(
      id: const Uuid().v4(),
      userId: user.id,
      routineId: routineId,
      mode: mode,
      startedAt: DateTime.now(),
    );

    // Supabaseì— ì„¸ì…˜ ìƒì„±
    await ref.read(workoutRepositoryProvider).createSession(session);
    
    state = session;
  }

  Future<void> addSet(WorkoutSetModel set) async {
    if (state == null) return;
    
    // 1RM ì—…ë°ì´íŠ¸ ì²´í¬
    await _checkAndUpdatePR(set);
    
    // Supabaseì— ì„¸íŠ¸ ì €ì¥
    await ref.read(workoutRepositoryProvider).addSet(set);
    
    // ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
    state = state!.copyWith(
      sets: [...state!.sets, set],
      totalSets: (state!.totalSets ?? 0) + 1,
      totalVolume: (state!.totalVolume ?? 0) + 
          (set.weight ?? 0) * (set.reps ?? 0),
    );
  }

  Future<void> finishWorkout() async {
    if (state == null) return;
    
    final finishedSession = state!.copyWith(
      finishedAt: DateTime.now(),
      totalDurationSeconds: DateTime.now()
          .difference(state!.startedAt)
          .inSeconds,
    );

    await ref.read(workoutRepositoryProvider)
        .updateSession(finishedSession);
    
    state = null;
  }

  Future<void> cancelWorkout() async {
    if (state == null) return;
    
    final cancelledSession = state!.copyWith(
      isCancelled: true,
      finishedAt: DateTime.now(),
    );

    await ref.read(workoutRepositoryProvider)
        .updateSession(cancelledSession);
    
    state = null;
  }
}
Copy
4.3 Timer Provider
Copy// lib/domain/providers/timer_provider.dart

@riverpod
class RestTimer extends _$RestTimer {
  Timer? _timer;
  
  @override
  int build() => 0;  // ë‚¨ì€ ì´ˆ

  void start(int seconds) {
    _timer?.cancel();
    state = seconds;
    
    _timer = Timer.periodic(const Duration(seconds: 1), (_) {
      if (state > 0) {
        state = state - 1;
      } else {
        _timer?.cancel();
        // íƒ€ì´ë¨¸ ì™„ë£Œ ì•Œë¦¼
        ref.read(hapticProvider).heavyImpact();
      }
    });
  }

  void pause() {
    _timer?.cancel();
  }

  void resume() {
    if (state > 0) {
      start(state);
    }
  }

  void skip() {
    _timer?.cancel();
    state = 0;
  }

  void addTime(int seconds) {
    state = state + seconds;
  }
}
Copy
5. Supabase ì„¤ì •
5.1 ì´ˆê¸°í™”
Copy// lib/data/services/supabase_service.dart

@riverpod
SupabaseService supabaseService(SupabaseServiceRef ref) {
  return SupabaseService();
}

class SupabaseService {
  late final SupabaseClient client;

  Future<void> initialize() async {
    await Supabase.initialize(
      url: const String.fromEnvironment('SUPABASE_URL'),
      anonKey: const String.fromEnvironment('SUPABASE_ANON_KEY'),
      authOptions: const FlutterAuthClientOptions(
        authFlowType: AuthFlowType.pkce,
      ),
    );
    client = Supabase.instance.client;
  }
}
5.2 main.dart
Copy// lib/main.dart

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Supabase ì´ˆê¸°í™”
  await Supabase.initialize(
    url: const String.fromEnvironment('SUPABASE_URL'),
    anonKey: const String.fromEnvironment('SUPABASE_ANON_KEY'),
  );
  
  // Hive ì´ˆê¸°í™” (ë¡œì»¬ ìºì‹±)
  await Hive.initFlutter();
  await Hive.openBox('settings');
  await Hive.openBox('cache');
  
  runApp(
    const ProviderScope(
      child: V2logApp(),
    ),
  );
}
6. í•µì‹¬ ìœ„ì ¯ êµ¬í˜„
6.1 V2Button
Copy// lib/presentation/widgets/atoms/v2_button.dart

class V2Button extends StatelessWidget {
  final String text;
  final IconData? icon;
  final VoidCallback? onPressed;
  final bool fullWidth;
  final V2ButtonStyle style;
  final bool isLoading;

  const V2Button({
    required this.text,
    this.icon,
    this.onPressed,
    this.fullWidth = false,
    this.style = V2ButtonStyle.primary,
    this.isLoading = false,
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: fullWidth ? double.infinity : null,
      height: 56,
      child: ElevatedButton(
        onPressed: isLoading ? null : onPressed,
        style: ElevatedButton.styleFrom(
          backgroundColor: style.backgroundColor,
          foregroundColor: style.foregroundColor,
          elevation: 0,
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
          padding: const EdgeInsets.symmetric(horizontal: 24),
        ),
        child: isLoading
            ? const SizedBox(
                width: 24,
                height: 24,
                child: CircularProgressIndicator(
                  strokeWidth: 2,
                  valueColor: AlwaysStoppedAnimation(Colors.white),
                ),
              )
            : Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  if (icon != null) ...[
                    Icon(icon, size: 20),
                    const SizedBox(width: 8),
                  ],
                  Text(
                    text,
                    style: AppTypography.labelLarge.copyWith(
                      color: style.foregroundColor,
                    ),
                  ),
                ],
              ),
      ),
    );
  }
}

enum V2ButtonStyle {
  primary(AppColors.primary500, Colors.white),
  secondary(AppColors.secondary500, Colors.white),
  outline(Colors.transparent, AppColors.primary500),
  ghost(Colors.transparent, AppColors.darkTextSecondary);

  final Color backgroundColor;
  final Color foregroundColor;

  const V2ButtonStyle(this.backgroundColor, this.foregroundColor);
}
Copy
6.2 SetRow (ë¹ ë¥¸ ê¸°ë¡ í–‰)
Copy// lib/presentation/widgets/molecules/set_row.dart

class SetRow extends ConsumerWidget {
  final int setNumber;
  final SetType setType;
  final double? weight;
  final int? reps;
  final bool isCompleted;
  final bool isCurrent;
  final VoidCallback? onTap;
  final VoidCallback? onLongPress;

  const SetRow({
    required this.setNumber,
    required this.setType,
    this.weight,
    this.reps,
    this.isCompleted = false,
    this.isCurrent = false,
    this.onTap,
    this.onLongPress,
    super.key,
  });

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return GestureDetector(
      onTap: onTap,
      onLongPress: onLongPress,
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
        decoration: BoxDecoration(
          color: isCurrent 
              ? AppColors.primary500.withOpacity(0.1)
              : Colors.transparent,
          border: Border(
            bottom: BorderSide(
              color: AppColors.darkBorder,
              width: 1,
            ),
          ),
        ),
        child: Row(
          children: [
            // ì„¸íŠ¸ ë²ˆí˜¸
            SizedBox(
              width: 40,
              child: Text(
                '$setNumber',
                style: AppTypography.bodyLarge.copyWith(
                  color: AppColors.darkTextSecondary,
                ),
              ),
            ),
            
            // ì„¸íŠ¸ íƒ€ì… ë±ƒì§€
            SetTypeBadge(type: setType),
            const SizedBox(width: 12),
            
            // ë¬´ê²Œ
            Expanded(
              child: Text(
                weight != null ? '${weight}kg' : '-',
                style: AppTypography.bodyLarge.copyWith(
                  color: AppColors.darkText,
                  fontWeight: FontWeight.w600,
                ),
                textAlign: TextAlign.center,
              ),
            ),
            
            // íšŸìˆ˜
            Expanded(
              child: Text(
                reps != null ? '$repsíšŒ' : '-',
                style: AppTypography.bodyLarge.copyWith(
                  color: AppColors.darkText,
                  fontWeight: FontWeight.w600,
                ),
                textAlign: TextAlign.center,
              ),
            ),
            
            // ì™„ë£Œ ìƒíƒœ
            SizedBox(
              width: 40,
              child: isCompleted
                  ? const Icon(
                      Icons.check_circle,
                      color: AppColors.success,
                      size: 24,
                    )
                  : Icon(
                      Icons.radio_button_unchecked,
                      color: AppColors.darkTextTertiary,
                      size: 24,
                    ),
            ),
          ],
        ),
      ),
    );
  }
}
Copy
6.3 RestTimer
Copy// lib/presentation/widgets/molecules/rest_timer.dart

class RestTimer extends ConsumerWidget {
  const RestTimer({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final seconds = ref.watch(restTimerProvider);
    final isRunning = seconds > 0;

    return Container(
      padding: const EdgeInsets.all(20),
      decoration: BoxDecoration(
        color: AppColors.darkCard,
        borderRadius: BorderRadius.circular(16),
      ),
      child: Column(
        children: [
          // íƒ€ì´ë¨¸ í‘œì‹œ
          Text(
            _formatTime(seconds),
            style: AppTypography.timer.copyWith(
              color: isRunning 
                  ? AppColors.primary500 
                  : AppColors.darkTextSecondary,
            ),
          ),
          const SizedBox(height: 16),
          
          // ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤
          Row(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              _TimerButton(
                icon: Icons.remove,
                label: '-15ì´ˆ',
                onTap: () {
                  HapticFeedback.lightImpact();
                  ref.read(restTimerProvider.notifier).addTime(-15);
                },
              ),
              const SizedBox(width: 16),
              
              // ì‹œì‘/ì¼ì‹œì •ì§€
              _TimerButton(
                icon: isRunning ? Icons.pause : Icons.play_arrow,
                label: isRunning ? 'ì¼ì‹œì •ì§€' : 'ì‹œì‘',
                isPrimary: true,
                onTap: () {
                  HapticFeedback.mediumImpact();
                  if (isRunning) {
                    ref.read(restTimerProvider.notifier).pause();
                  } else {
                    ref.read(restTimerProvider.notifier).start(90);
                  }
                },
              ),
              const SizedBox(width: 16),
              
              _TimerButton(
                icon: Icons.add,
                label: '+15ì´ˆ',
                onTap: () {
                  HapticFeedback.lightImpact();
                  ref.read(restTimerProvider.notifier).addTime(15);
                },
              ),
              const SizedBox(width: 16),
              
              _TimerButton(
                icon: Icons.skip_next,
                label: 'ê±´ë„ˆë›°ê¸°',
                onTap: () {
                  HapticFeedback.lightImpact();
                  ref.read(restTimerProvider.notifier).skip();
                },
              ),
            ],
          ),
        ],
      ),
    );
  }

  String _formatTime(int seconds) {
    final minutes = seconds ~/ 60;
    final secs = seconds % 60;
    return '${minutes.toString().padLeft(2, '0')}:${secs.toString().padLeft(2, '0')}';
  }
}
Copy
7. ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´
Copy// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì— ì ìš©

// Repositoryì—ì„œ
Future<Result<UserModel, AppError>> getUserById(String id) async {
  try {
    final response = await supabase
        .from('users')
        .select()
        .eq('id', id)
        .single();
    return Result.success(UserModel.fromJson(response));
  } on PostgrestException catch (e) {
    return Result.failure(AppError.database(e.message));
  } catch (e) {
    return Result.failure(AppError.unknown(e.toString()));
  }
}

// Providerì—ì„œ
@riverpod
class User extends _$User {
  @override
  FutureOr<UserModel?> build() async {
    return await _fetchUser();
  }

  Future<UserModel?> _fetchUser() async {
    final result = await ref.read(userRepositoryProvider).getCurrentUser();
    return result.when(
      success: (user) => user,
      failure: (error) {
        // ì—ëŸ¬ ë¡œê¹…
        ref.read(loggerProvider).error(error);
        return null;
      },
    );
  }
}

// UIì—ì„œ
class ProfileScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final userAsync = ref.watch(userProvider);
    
    return userAsync.when(
      data: (user) => user != null 
          ? ProfileContent(user: user)
          : const LoginPrompt(),
      loading: () => const LoadingIndicator(),
      error: (error, stack) => ErrorView(
        message: error.toString(),
        onRetry: () => ref.invalidate(userProvider),
      ),
    );
  }
}
Copy
8. í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
Widget í…ŒìŠ¤íŠ¸
Copy// test/presentation/widgets/set_row_test.dart

void main() {
  testWidgets('SetRow displays correctly', (tester) async {
    await tester.pumpWidget(
      const ProviderScope(
        child: MaterialApp(
          home: Scaffold(
            body: SetRow(
              setNumber: 1,
              setType: SetType.working,
              weight: 60,
              reps: 10,
              isCompleted: true,
            ),
          ),
        ),
      ),
    );

    expect(find.text('1'), findsOneWidget);
    expect(find.text('60kg'), findsOneWidget);
    expect(find.text('10íšŒ'), findsOneWidget);
    expect(find.byIcon(Icons.check_circle), findsOneWidget);
  });
}
Provider í…ŒìŠ¤íŠ¸
Copy// test/domain/providers/workout_provider_test.dart

void main() {
  test('startWorkout creates a new session', () async {
    final container = ProviderContainer(
      overrides: [
        workoutRepositoryProvider.overrideWithValue(MockWorkoutRepository()),
      ],
    );

    await container.read(activeWorkoutProvider.notifier).startWorkout(
      mode: WorkoutMode.free,
    );

    final session = container.read(activeWorkoutProvider);
    expect(session, isNotNull);
    expect(session!.mode, WorkoutMode.free);
  });
}
9. ì„±ëŠ¥ ìµœì í™”
9.1 ListView ìµœì í™”
Copy// í•­ìƒ ListView.builder ì‚¬ìš©
ListView.builder(
  itemCount: exercises.length,
  itemBuilder: (context, index) {
    return ExerciseCard(exercise: exercises[index]);
  },
)

// const ìƒì„±ì í™œìš©
const SizedBox(height: 16),
const Divider(),
9.2 ì´ë¯¸ì§€ ìºì‹±
Copy// cached_network_image ì‚¬ìš©
CachedNetworkImage(
  imageUrl: exercise.thumbnailUrl ?? '',
  placeholder: (context, url) => const ShimmerBox(),
  errorWidget: (context, url, error) => const Icon(Icons.error),
  memCacheWidth: 200,  // ë©”ëª¨ë¦¬ ìµœì í™”
)
9.3 Provider ìµœì í™”
Copy// selectë¡œ í•„ìš”í•œ ë¶€ë¶„ë§Œ êµ¬ë…
final userName = ref.watch(
  userProvider.select((user) => user.valueOrNull?.nickname),
);

// keepAliveë¡œ ë¶ˆí•„ìš”í•œ ì¬ìƒì„± ë°©ì§€
@Riverpod(keepAlive: true)
class ExerciseLibrary extends _$ExerciseLibrary {
  // ...
}
10. ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
Android
 android/app/build.gradle - applicationId ì„¤ì •
 android/app/src/main/AndroidManifest.xml - ê¶Œí•œ ì„¤ì •
 ì„œëª… í‚¤ ìƒì„± ë° ì„¤ì •
 ProGuard ê·œì¹™ ì¶”ê°€
iOS
 ios/Runner/Info.plist - ê¶Œí•œ ì„¤ëª… ì¶”ê°€
 Bundle Identifier ì„¤ì •
 Capabilities ì„¤ì • (HealthKit ë“±)
 App Store Connect ì„¤ì •
í™˜ê²½ ë³€ìˆ˜
Copy# .env íŒŒì¼ (gitignoreì— ì¶”ê°€)
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=xxx
OPENAI_API_KEY=xxx
Copy# ë¹Œë“œ ì‹œ í™˜ê²½ ë³€ìˆ˜ ì „ë‹¬
flutter run --dart-define=SUPABASE_URL=xxx --dart-define=SUPABASE_ANON_KEY=xxx